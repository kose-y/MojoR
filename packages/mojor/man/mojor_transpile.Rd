% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/roxygen_api_docs.R
\name{mojor_transpile}
\alias{mojor_transpile}
\title{Transpile Supported R Functions to Mojo Source}
\usage{
mojor_transpile(
fn,
...,
name = "mojor_kernel",
na_mode = NULL,
fusion_debug = FALSE,
assume_aligned = NULL,
simd_mode = NULL,
elementwise = FALSE,
elementwise_target = c("cpu", "gpu"),
elementwise_size = NULL,
elementwise_cpu = NULL,
elementwise_gpu_layouttensor = NULL,
gpu_jit_mode = NULL,
broadcast = c(
"none",
"scalar",
"recycle",
"recycle_warn",
"broadcast_nd",
"broadcast_nd_warn"
),
parallel = FALSE,
allow_in_place = FALSE,
semantics = c("r", "raw"),
unroll = NULL,
reduction = NULL,
bounds_check = NULL,
index_base = NULL,
array_layout = NULL,
tile = NULL,
emit_ir = FALSE,
emit_ssa_backend = FALSE,
opt_level = NULL,
fusion = TRUE,
debug = FALSE,
trace = FALSE,
memory_check = FALSE,
df_schema = NULL,
profile = FALSE
)
}
\arguments{
\item{fn}{Function to transpile.}

\item{...}{Named type annotations for arguments, e.g. \code{x = "f64[]"}, \code{n = "i32"}.
Vectors, matrices, and higher-dimensional arrays are all ndarrays distinguished
by rank: \code{"f64[]"} (or \code{"f64[1d]"}) for 1-D, \code{"f64[,]"} (or \code{"f64[2d]"}) for 2-D,
\code{"f64[3d]"} for 3-D, etc.}

\item{name}{Kernel symbol name used in generated Mojo/C ABI glue.}

\item{na_mode}{NA policy override. \code{NULL} uses \code{mojor_options("na_mode")}.}

\item{fusion_debug}{If \code{TRUE}, emit fusion/SIMD routing diagnostics.}

\item{assume_aligned}{Optional positive integer alignment hint (bytes) for SIMD codegen.}

\item{simd_mode}{SIMD mode override (typically \code{"explicit"} or \code{"auto"}).}

\item{elementwise}{Enable elementwise lowering path when eligible.}

\item{elementwise_target}{Elementwise target, \code{"cpu"} or \code{"gpu"}.}

\item{elementwise_size}{Optional elementwise launch/work size hint.}

\item{elementwise_cpu}{Optional CPU-only elementwise override.}

\item{elementwise_gpu_layouttensor}{Optional GPU elementwise layout-tensor override.}

\item{gpu_jit_mode}{Optional GPU JIT mode override for elementwise GPU routing.}

\item{broadcast}{Broadcast/recycling policy.}

\item{parallel}{Enable parallel routing when legal.}

\item{allow_in_place}{Accept in-place intent metadata (currently conservative).}

\item{semantics}{Execution semantics mode: \code{"r"} or \code{"raw"}.}

\item{unroll}{Optional loop-unroll scheduling hint.}

\item{reduction}{Optional reduction scheduling mode.}

\item{bounds_check}{Optional bounds-check policy override.}

\item{index_base}{Optional index base override (\code{"one_based"} or \code{"zero_based"}).}

\item{array_layout}{Optional layout override (\code{"col_major"} or \code{"row_major"}).}

\item{tile}{Optional tiling metadata.}

\item{emit_ir}{If \code{TRUE}, include IR dump payload in output.}

\item{emit_ssa_backend}{If \code{TRUE}, include SSA-backend artifacts when available.}

\item{opt_level}{Optimization level override (\verb{0..3} or \code{NULL}).}

\item{fusion}{Enable fusion analysis/routing hooks.}

\item{debug}{Enable debug-oriented code generation paths.}

\item{trace}{Enable verbose trace diagnostics.}

\item{memory_check}{Enable additional memory safety checks in generated wrapper paths.}

\item{df_schema}{Optional data.frame schema metadata for rewrite paths.}

\item{profile}{Attach profiling wrappers/metadata to results.}
}
\value{
A list describing transpilation output. Core fields include:
\itemize{
\item \code{mojo}: generated Mojo source text.
\item \code{name}: kernel symbol name.
\item \code{types}: normalized argument type map.
\item \code{out_kind}, \code{out_name}, \code{out_type}: output contract metadata.
\item \code{n_source}: loop-length/source metadata.
\item \code{ir}: IR payload (when requested).
\item \code{ssa_backend}, \code{ssa_backend_status}: SSA backend artifacts and fallback status.
\item \code{simd}, \code{elementwise}, \code{parallel}, \code{fusion}: scheduling metadata.
\item \code{compatibility}: release/API/transpile versioning metadata for consumers.
\item \code{rng_needed}, \code{na_mode}, \code{diagnostics}: runtime requirement flags and diagnostics.
}
}
\description{
Transpile a supported subset of R into Mojo source without compiling.
}
\details{
The accepted R subset is intentionally constrained; unsupported constructs fail fast
with explicit diagnostics. Use \code{\link[=mojor_build]{mojor_build()}} to compile the returned Mojo source.
}
\examples{
f <- function(x) {
out <- numeric(length(x))
for (i in 1:length(x)) out[i] <- x[i] * 2
out
}

\dontrun{
tr <- mojor_transpile(f, x = "f64[]")
cat(substr(tr$mojo, 1, 120), "...\n")
}
}
